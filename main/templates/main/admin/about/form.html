{% extends 'main/admin/base.html' %}
{% load static %}

{% block title %}{{ title }} - Админ панель{% endblock %}

{% block heading %}{{ title }}{% endblock %}

{% block content %}
<div class="card">
    <div class="card-body">
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            
            <!-- Language Tabs -->
            <ul class="nav nav-tabs mb-4" id="langTabs" role="tablist">
                <li class="nav-item">
                    <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#ru" type="button">Русский</button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" data-bs-toggle="tab" data-bs-target="#en" type="button">English</button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" data-bs-toggle="tab" data-bs-target="#kk" type="button">Қазақша</button>
                </li>
            </ul>
            
            <div class="tab-content">
                <!-- Russian -->
                <div class="tab-pane fade show active" id="ru">
                    <div class="mb-3">
                        <label class="form-label">Заголовок (русский) *</label>
                        {{ form.title }}
                        {{ form.title.errors }}
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Содержание (русский) *</label>
                        {{ form.content }}
                        {{ form.content.errors }}
                    </div>
                </div>
                
                <!-- English -->
                <div class="tab-pane fade" id="en">
                    <div class="mb-3">
                        <label class="form-label">Title (English)</label>
                        {{ form.title_en }}
                        {{ form.title_en.errors }}
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Content (English)</label>
                        {{ form.content_en }}
                        {{ form.content_en.errors }}
                    </div>
                </div>
                
                <!-- Kazakh -->
                <div class="tab-pane fade" id="kk">
                    <div class="mb-3">
                        <label class="form-label">Тақырып (Қазақша)</label>
                        {{ form.title_kk }}
                        {{ form.title_kk.errors }}
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Мазмұны (Қазақша)</label>
                        {{ form.content_kk }}
                        {{ form.content_kk.errors }}
                    </div>
                </div>
            </div>
            
            <hr class="my-4">
            
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label class="form-label">Порядковый номер</label>
                        {{ form.order }}
                        <div class="form-text">Определяет порядок отображения</div>
                        {{ form.order.errors }}
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-check form-switch mb-3">
                        {{ form.is_active }}
                        <label class="form-check-label">Активно</label>
                    </div>
                </div>
            </div>
            
            <div class="d-flex justify-content-between mt-4">
                <a href="{% url 'main:admin_about' %}" class="btn btn-outline-secondary">
                    <i class="fas fa-arrow-left me-1"></i> Назад
                </a>
                <div>
                    {% if item %}
                        <a href="{% url 'main:admin_about_delete' item.id %}" 
                           class="btn btn-outline-danger me-2"
                           onclick="return confirm('Вы уверены, что хотите удалить этот раздел?');">
                            <i class="fas fa-trash me-1"></i> Удалить
                        </a>
                    {% endif %}
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save me-1"></i> Сохранить
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'ckeditor/ckeditor.js' %}"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize CKEditor for each textarea
        ['{{ form.content.id_for_label }}', '{{ form.content_en.id_for_label }}', '{{ form.content_kk.id_for_label }}'].forEach(id => {
            if (document.getElementById(id)) {
                CKEDITOR.replace(id, {
                    removePlugins: 'elementspath',
                    height: 300,
                    toolbar: [
                        { name: 'basicstyles', items: ['Bold', 'Italic', 'Underline', 'Strike'] },
                        { name: 'paragraph', items: ['NumberedList', 'BulletedList', 'Blockquote'] },
                        { name: 'links', items: ['Link', 'Unlink'] },
                        { name: 'insert', items: ['Image', 'Table'] },
                        { name: 'tools', items: ['Maximize', 'Source'] }
                    ]
                });
            }
        });
    });
</script>
{% endblock %}
