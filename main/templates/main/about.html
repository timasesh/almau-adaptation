{% extends 'main/base.html' %}
{% load static %}
{% load i18n %}
{% load translation_tags %}

{% block title %}Об Университете - Adaptation AlmaU{% endblock %}

{% block content %}
<div class="dashboard-container">
    <script>
    // Немедленное применение темы
    (function() {
        const savedTheme = localStorage.getItem('selectedTheme') || 'light';
        if (savedTheme === 'dark') {
            document.documentElement.classList.add('theme-dark');
            document.body.classList.add('theme-dark');
            document.documentElement.style.backgroundColor = '#1a1a1a';
            document.body.style.backgroundColor = '#1a1a1a';
        } else {
            document.documentElement.classList.add('theme-light');
            document.body.classList.add('theme-light');
            document.documentElement.style.backgroundColor = '#ffffff';
            document.body.style.backgroundColor = '#ffffff';
        }
    })();
    </script>
    {% include 'main/sidebar.html' %}
    
    <!-- Main content -->
    <div class="main-content" id="mainContent">
        <!-- Фиксированный логотип (не в потоке документа) -->
        <span class="user-badge fixed-almau-logo">AlmaUni</span>
        
        <div class="content-header">
            <div class="greeting">
                <h1>{% trans "Об университете" %}</h1>
            </div>
        </div>
        
        <div class="about-content">
            {% load static %}
            <!-- История -->
            <div class="history-section">
                <h2>{% trans "История" %}</h2>
                <div class="history-content">
                    <div class="history-text">
                        {% if history_text %}
                            <p class="history-paragraph">{{ history_text|linebreaks }}</p>
                        {% else %}
                            <p>{% trans "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum" %}</p>
                        {% endif %}
                    </div>
                    <div class="history-image">
                        <img src="{% static 'images/almau.png' %}" alt="Здание AlmaU">
                    </div>
                </div>
            </div>
            
            <!-- Миссия и Ценности -->
            <div class="mission-values">
                <div class="mission-card">
                    <div class="circle-icon mission-icon">
                        <img src="{% static 'images/миссия.png' %}" alt="Миссия" class="custom-icon light-theme-icon">
                        <img src="{% static 'images/миссия-t.png' %}" alt="Миссия" class="custom-icon dark-theme-icon">
                    </div>
                    <h3>{% trans "Миссия" %}</h3>
                    {% if mission_text %}
                        <p>{{ mission_text }}</p>
                    {% else %}
                        <p>{% trans "Миссия университета - подготовка высококвалифицированных специалистов для инновационной экономики Казахстана" %}</p>
                    {% endif %}
                </div>
                
                <div class="values-card">
                    <div class="circle-icon values-icon">
                        <img src="{% static 'images/ценности.png' %}" alt="Ценности" class="custom-icon light-theme-icon">
                        <img src="{% static 'images/ценности-t.png' %}" alt="Ценности" class="custom-icon dark-theme-icon">
                    </div>
                    <h3>{% trans "Ценности" %}</h3>
                    {% if values_text %}
                        <p>{{ values_text }}</p>
                    {% else %}
                        <p>{% trans "Наши ценности: качество образования, инновации, международное сотрудничество и развитие личности" %}</p>
                    {% endif %}
                </div>
            </div>
            
            <!-- Руководство -->
            <div class="leadership-section">
                <h2>{% trans "Руководство Университета" %}</h2>
                <div class="leadership-cards">
                    {% if leaders %}
                        {% for leader in leaders %}
                            <div class="leader-card">
                                <div class="leader-avatar">
                                    {% if leader.photo %}
                                        <img src="{{ leader.photo.url }}" alt="{{ leader.full_name }}" class="leader-photo">
                                    {% else %}
                                        <i class="fas fa-user"></i>
                                    {% endif %}
                                </div>
                                <h3>{{ leader.get_role_display }}</h3>
                                <p class="leader-name">{{ leader.full_name }}</p>
                            </div>
                        {% endfor %}
                    {% else %}
                        <div class="leader-card">
                            <div class="leader-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <h3>{% trans "Ректор" %}</h3>
                        </div>
                        
                        <div class="leader-card">
                            <div class="leader-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <h3>{% trans "Проректор" %}</h3>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* Шрифт страницы Об университете */
@font-face {
    font-family: 'Helvetica Neue';
    src: local('Helvetica Neue'), local('HelveticaNeue');
    font-display: swap;
}

.about-content, .about-content * {
    font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif !important;
}
/* Фиксированный логотип AlmaUni */
.fixed-almau-logo {
    position: fixed !important;
    top: 32px !important;
    right: 30px !important; /* Фиксированная позиция справа сверху */
    z-index: 1000 !important;
    background: #1976D2 !important;
    color: white !important;
    padding: 8px 16px !important;
    border-radius: 20px !important;
    font-weight: bold !important;
    font-size: 14px !important;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1) !important;
    white-space: nowrap !important;
}

/* На мобильных устройствах */
@media (max-width: 768px) {
    .fixed-almau-logo {
        right: 20px !important;
        top: 15px !important;
    }
}

.about-content {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

/* История */
.history-section {
    margin-bottom: 60px;
}

.history-section h2 {
    font-size: 24px;
    font-weight: 600;
    margin-bottom: 30px;
    color: #333;
}

.history-content {
    display: flex;
    gap: 40px;
    align-items: flex-start;
}

.history-text {
    flex: 1;
    max-width: 60%; /* Ограничиваем ширину текста */
    word-wrap: break-word; /* Перенос длинных слов */
    overflow-wrap: break-word; /* Современный способ переноса */
}

.history-text p {
    font-size: 16px;
    line-height: 1.6;
    color: #000000;
    text-align: justify;
    word-wrap: break-word; /* Перенос длинных слов */
    overflow-wrap: break-word; /* Современный способ переноса */
    max-width: 100%; /* Текст не может быть шире контейнера */
}

.history-image {
    flex: 0 0 400px;
}

.history-image img {
    width: 100%;
    height: 250px;
    object-fit: cover;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

/* Миссия и Ценности */
.mission-values {
    display: flex;
    gap: 60px;
    margin-bottom: 80px;
    justify-content: center;
}

/* Мобильная версия для миссии и ценностей */
@media (max-width: 768px) {
    .mission-values {
        flex-direction: column;
        gap: 40px;
        align-items: center;
    }
    
    .mission-card, .values-card {
        max-width: 300px;
    }
    
    .circle-icon {
        width: 120px;
        height: 120px;
    }
}

.mission-card, .values-card {
    text-align: center;
    max-width: 400px;
}

.circle-icon {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    background: transparent;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px;
    color: white;
    font-size: 40px;
    overflow: hidden;
    border: none;
}

.custom-icon {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* Иконки для светлой и темной темы */
.light-theme-icon {
    display: block;
}

.dark-theme-icon {
    display: none;
}

/* Темная тема */
[data-theme="dark"] .light-theme-icon {
    display: none;
}

[data-theme="dark"] .dark-theme-icon {
    display: block;
}

.mission-card h3, .values-card h3 {
    font-size: 32px;
    font-weight: 600;
    margin-bottom: 20px;
    color: #000000;
}

.mission-card p, .values-card p {
    font-size: 16px;
    line-height: 1.6;
    color: #000000;
    text-align: center;
    word-wrap: break-word; /* Перенос длинных слов */
    overflow-wrap: break-word; /* Современный способ переноса */
    max-width: 100%; /* Текст не может быть шире контейнера */
}

/* Руководство */
.leadership-section {
    text-align: center;
}

.leadership-section h2 {
    font-size: 32px;
    font-weight: 600;
    margin-bottom: 50px;
    color: #333;
}

.leadership-cards {
    display: flex;
    gap: 100px;
    justify-content: center;
}

.leader-card {
    text-align: center;
}

.leader-avatar {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    border: 4px solid #1976D2;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px;
    color: #1976D2;
    font-size: 50px;
    background: white;
}

.leader-card h3 {
    font-size: 24px;
    font-weight: 600;
    color: #333;
}

.leader-photo {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
}

.leader-name {
    margin-top: 8px;
    font-size: 14px;
    color: #666;
    text-align: center;
}

/* Responsive */
@media (max-width: 768px) {
    .history-content {
        flex-direction: column;
    }
    
    .history-image {
        flex: none;
    }
    
    .mission-values {
        flex-direction: column;
        gap: 40px;
    }
    
    .leadership-cards {
        flex-direction: column;
        gap: 40px;
    }
}

/* Темная тема */
@media (prefers-color-scheme: dark) {
    .about-content .history-section h2 {
        color: white !important;
    }
    
    .about-content .leadership-section h2 {
        color: white !important;
    }
    
    .about-content .leader-card h3 {
        color: white !important;
    }
}

/* Светлая тема */
@media (prefers-color-scheme: light) {
    .about-content .history-section h2 {
        color: #333333 !important;
    }
    
    .about-content .leadership-section h2 {
        color: #333333 !important;
    }
    
    .about-content .leader-card h3 {
        color: #000000 !important;
    }
}

/* Принудительное переопределение цветов */
body.theme-dark .about-content .history-section h2,
body.theme-dark .about-content .leadership-section h2,
body.theme-dark .about-content .leader-card h3,
body.theme-dark .about-content .leader-name {
    color: white !important;
}

body.theme-light .about-content .leader-name {
    color: #666 !important;
}

body.theme-light .about-content .history-section h2,
body.theme-light .about-content .leadership-section h2,
body.theme-light .about-content .leader-card h3 {
    color: #333333 !important;
}

body.theme-light .about-content .leader-card h3 {
    color: #000000 !important;
}
</style>

<script>
// Принудительное применение цветов при загрузке страницы
document.addEventListener('DOMContentLoaded', function() {
    function applyThemeColors() {
        const body = document.body;
        const historyH2 = document.querySelector('.history-section h2');
        const leadershipH2 = document.querySelector('.leadership-section h2');
        const leaderH3s = document.querySelectorAll('.leader-card h3');
        
        if (body.classList.contains('theme-dark')) {
            if (historyH2) historyH2.style.color = 'white';
            if (leadershipH2) leadershipH2.style.color = 'white';
            leaderH3s.forEach(h3 => h3.style.color = 'white');
        } else {
            if (historyH2) historyH2.style.color = '#333333';
            if (leadershipH2) leadershipH2.style.color = '#333333';
            leaderH3s.forEach(h3 => h3.style.color = '#000000');
        }
    }
    
    // Применяем цвета сразу
    applyThemeColors();
    
    // Применяем цвета при изменении темы
    const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                setTimeout(applyThemeColors, 100);
            }
        });
    });
    
    observer.observe(document.body, {
        attributes: true,
        attributeFilter: ['class']
    });
});
</script>
{% endblock %}